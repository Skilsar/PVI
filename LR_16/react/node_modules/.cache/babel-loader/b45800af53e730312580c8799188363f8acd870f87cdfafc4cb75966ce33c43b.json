{"ast":null,"code":"var _jsxFileName = \"D:\\\\BSTU\\\\practica\\\\PWI\\\\Lab16\\\\react\\\\src\\\\components\\\\uwsr.component.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { WsrefListComponent } from \"./wsref-list.component\";\nimport { RoleNames } from \"../util/role-names\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function UwsrComponent() {\n  _s();\n  let [role, setRole] = useState(RoleNames.GUEST);\n  let [password, setPassword] = useState(\"\");\n  let [admin, setAdmin] = useState(false);\n  let [guest, setGuest] = useState(false);\n  const authorize = async () => {\n    try {\n      await axios.post(\"\", {\n        password\n      });\n      setRole(RoleNames.ADMIN);\n    } catch (error) {\n      if (error.response) console.error(`Error ${error.response.status}`, error.response.data);else throw error;\n    }\n  };\n  const logout = async () => {\n    try {\n      sessionStorage.removeItem(\"sessionId\");\n    } catch (error) {\n      if (error.response) console.error(`Error ${error.response.status}`, error.response.data);else throw error;\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.ctrlKey && e.altKey) {\n      switch (e.code) {\n        case \"KeyA\":\n          setAdmin(true);\n          break;\n        case \"KeyG\":\n          setGuest(true);\n          break;\n      }\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyPress);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyPress);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"-- UWSR --\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), admin ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: async e => {\n            await logout();\n            await authorize();\n            setAdmin(false);\n          },\n          children: \"Set\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: async e => {\n            setRole(RoleNames.GUEST);\n            setAdmin(false);\n            await logout();\n          },\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 22\n    }, this) : null, guest ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setRole(RoleNames.GUEST);\n            setGuest(false);\n          },\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 22\n    }, this) : null, /*#__PURE__*/_jsxDEV(WsrefListComponent, {\n      role: role\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s(UwsrComponent, \"c8BdDyCk7keWLr737VUWMdl1TDw=\");\n_c = UwsrComponent;\nvar _c;\n$RefreshReg$(_c, \"UwsrComponent\");","map":{"version":3,"names":["useEffect","useState","WsrefListComponent","RoleNames","axios","jsxDEV","_jsxDEV","UwsrComponent","_s","role","setRole","GUEST","password","setPassword","admin","setAdmin","guest","setGuest","authorize","post","ADMIN","error","response","console","status","data","logout","sessionStorage","removeItem","handleKeyPress","e","ctrlKey","altKey","code","window","addEventListener","removeEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","className","name","value","onChange","target","onClick","_c","$RefreshReg$"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/components/uwsr.component.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {WsrefListComponent} from \"./wsref-list.component\";\nimport {RoleNames} from \"../util/role-names\";\nimport axios from \"axios\";\n\nexport function UwsrComponent() {\n    let [role, setRole] = useState(RoleNames.GUEST)\n    let [password, setPassword] = useState(\"\");\n    let [admin, setAdmin] = useState(false);\n    let [guest, setGuest] = useState(false);\n    const authorize = async () => {\n        try {\n            await axios.post(\"\", {password});\n            setRole(RoleNames.ADMIN);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n    const logout = async () => {\n        try {\n            sessionStorage.removeItem(\"sessionId\");\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n    const handleKeyPress = (e: KeyboardEvent) => {\n        if (e.ctrlKey && e.altKey) {\n            switch (e.code) {\n                case \"KeyA\":\n                    setAdmin(true);\n                    break;\n                case \"KeyG\":\n                    setGuest(true);\n                    break;\n            }\n        }\n    }\n    useEffect(() => {\n        window.addEventListener(\"keydown\", handleKeyPress);\n        return () => {\n            window.removeEventListener(\"keydown\", handleKeyPress);\n        };\n    }, []);\n    return (\n        <div>\n            <h1>-- UWSR --</h1>\n            {admin ? <div>\n                <div className={\"flex\"}>\n                    <input name={\"password\"} value={password} onChange={(e: any) => setPassword(e.target.value)}/>\n                </div>\n                <div>\n                    <button onClick={async (e: any) => {\n                         await logout();\n                        await authorize();\n                        setAdmin(false);\n                    }}>Set\n                    </button>\n                    <button onClick={async (e: any) => {\n                        setRole(RoleNames.GUEST);\n                        setAdmin(false);\n                        await logout();\n                    }}>Reset\n                    </button>\n                </div>\n            </div> : null}\n            {guest ? <div>\n                <div>\n                    <button onClick={(e: any) => {\n                        setRole(RoleNames.GUEST);\n                        setGuest(false);\n                    }}>Reset\n                    </button>\n                </div>\n            </div> : null}\n            <WsrefListComponent role={role}/>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}