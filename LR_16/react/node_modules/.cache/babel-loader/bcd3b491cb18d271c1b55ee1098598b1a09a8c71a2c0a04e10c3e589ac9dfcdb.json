{"ast":null,"code":"import _regeneratorRuntime from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";export var ApiManager=/*#__PURE__*/function(){function ApiManager(){_classCallCheck(this,ApiManager);}_createClass(ApiManager,null,[{key:\"get\",value:function(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,params){var _yield$axios$get,data,headers;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),{params:params,withCredentials:true});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;headers=_yield$axios$get.headers;console.log(headers[\"x-session-id\"]);if(headers[\"x-session-id\"]&&headers[\"x-session-id\"]!==sessionStorage.getItem(\"sessionId\"))sessionStorage.setItem(\"sessionId\",'1');return _context.abrupt(\"return\",data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);if(!_context.t0.response){_context.next=17;break;}console.error(\"Error \".concat(_context.t0.response.status),_context.t0.response.data);_context.next=18;break;case 17:throw _context.t0;case 18:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));function get(_x,_x2){return _get.apply(this,arguments);}return get;}()},{key:\"post\",value:function(){var _post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url,body){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),body);case 3:_context2.next=12;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);if(!_context2.t0.response){_context2.next=11;break;}console.error(\"Error \".concat(_context2.t0.response.status),_context2.t0.response.data);_context2.next=12;break;case 11:throw _context2.t0;case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}));function post(_x3,_x4){return _post.apply(this,arguments);}return post;}()},{key:\"put\",value:function(){var _put=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(url,body){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),body);case 3:_context3.next=12;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);if(!_context3.t0.response){_context3.next=11;break;}console.error(\"Error \".concat(_context3.t0.response.status),_context3.t0.response.data);_context3.next=12;break;case 11:throw _context3.t0;case 12:case\"end\":return _context3.stop();}},_callee3,null,[[0,5]]);}));function put(_x5,_x6){return _put.apply(this,arguments);}return put;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(url){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url));case 3:_context4.next=12;break;case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);if(!_context4.t0.response){_context4.next=11;break;}console.error(\"Error \".concat(_context4.t0.response.status),_context4.t0.response.data);_context4.next=12;break;case 11:throw _context4.t0;case 12:case\"end\":return _context4.stop();}},_callee4,null,[[0,5]]);}));function _delete(_x7){return _delete2.apply(this,arguments);}return _delete;}()}]);return ApiManager;}();","map":{"version":3,"names":["axios","ApiManager","_classCallCheck","_createClass","key","value","_get","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","params","_yield$axios$get","data","headers","wrap","_callee$","_context","prev","next","get","concat","process","env","REACT_APP_API_URL","withCredentials","sent","console","log","sessionStorage","getItem","setItem","abrupt","t0","response","error","status","stop","_x","_x2","apply","arguments","_post","_callee2","body","_callee2$","_context2","post","_x3","_x4","_put","_callee3","_callee3$","_context3","put","_x5","_x6","_delete2","_callee4","_callee4$","_context4","delete","_delete","_x7"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/util/api.manager.ts"],"sourcesContent":["import axios from \"axios\";\n\nexport class ApiManager {\n\n    static async get(url: string, params?: any) {\n        try {\n            let {data, headers} = await axios.get(`${process.env.REACT_APP_API_URL}/api${url}`, {\n                params,\n                withCredentials: true\n            });\n            console.log(headers[\"x-session-id\"]);\n            if (headers[\"x-session-id\"] && headers[\"x-session-id\"] !== sessionStorage.getItem(\"sessionId\"))\n                sessionStorage.setItem(\"sessionId\", '1');\n            return data;\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n\n    static async post(url: string, body?: any) {\n        try {\n            await axios.post(`${process.env.REACT_APP_API_URL}/api${url}`, body);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n\n    static async put(url: string, body?: any) {\n        try {\n            await axios.put(`${process.env.REACT_APP_API_URL}/api${url}`, body);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n\n    static async delete(url: string) {\n        try {\n            await axios.delete(`${process.env.REACT_APP_API_URL}/api${url}`);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}