{"ast":null,"code":"import _regeneratorRuntime from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";export var ApiManager=/*#__PURE__*/function(){function ApiManager(){_classCallCheck(this,ApiManager);}_createClass(ApiManager,null,[{key:\"get\",value:function(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,params){var _yield$axios$get,data,headers;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),{params:params,withCredentials:true});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;headers=_yield$axios$get.headers;console.log(document.cookie);if(headers[\"x-session-id\"]&&headers[\"x-session-id\"]!==sessionStorage.getItem(\"sessionId\"))sessionStorage.setItem(\"sessionId\",headers[\"x-session-id\"]);return _context.abrupt(\"return\",data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);if(!_context.t0.response){_context.next=17;break;}console.error(\"Error \".concat(_context.t0.response.status),_context.t0.response.data);_context.next=18;break;case 17:throw _context.t0;case 18:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));function get(_x,_x2){return _get.apply(this,arguments);}return get;}()},{key:\"post\",value:function(){var _post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url,body){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),body);case 3:_context2.next=12;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);if(!_context2.t0.response){_context2.next=11;break;}console.error(\"Error \".concat(_context2.t0.response.status),_context2.t0.response.data);_context2.next=12;break;case 11:throw _context2.t0;case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}));function post(_x3,_x4){return _post.apply(this,arguments);}return post;}()},{key:\"put\",value:function(){var _put=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(url,body){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),body);case 3:_context3.next=12;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);if(!_context3.t0.response){_context3.next=11;break;}console.error(\"Error \".concat(_context3.t0.response.status),_context3.t0.response.data);_context3.next=12;break;case 11:throw _context3.t0;case 12:case\"end\":return _context3.stop();}},_callee3,null,[[0,5]]);}));function put(_x5,_x6){return _put.apply(this,arguments);}return put;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(url){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url));case 3:_context4.next=12;break;case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);if(!_context4.t0.response){_context4.next=11;break;}console.error(\"Error \".concat(_context4.t0.response.status),_context4.t0.response.data);_context4.next=12;break;case 11:throw _context4.t0;case 12:case\"end\":return _context4.stop();}},_callee4,null,[[0,5]]);}));function _delete(_x7){return _delete2.apply(this,arguments);}return _delete;}()}]);return ApiManager;}();","map":{"version":3,"names":["axios","ApiManager","_classCallCheck","_createClass","key","value","_get","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","params","_yield$axios$get","data","headers","wrap","_callee$","_context","prev","next","get","concat","process","env","REACT_APP_API_URL","withCredentials","sent","console","log","document","cookie","sessionStorage","getItem","setItem","abrupt","t0","response","error","status","stop","_x","_x2","apply","arguments","_post","_callee2","body","_callee2$","_context2","post","_x3","_x4","_put","_callee3","_callee3$","_context3","put","_x5","_x6","_delete2","_callee4","_callee4$","_context4","delete","_delete","_x7"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/util/api.manager.ts"],"sourcesContent":["import axios from \"axios\";\n\nexport class ApiManager {\n\n    static async get(url: string, params?: any) {\n        try {\n            let {data, headers} = await axios.get(`${process.env.REACT_APP_API_URL}/api${url}`, {\n                params,\n                withCredentials: true\n            });\n      \nconsole.log(document.cookie);\n            if (headers[\"x-session-id\"] && headers[\"x-session-id\"] !== sessionStorage.getItem(\"sessionId\"))\n                sessionStorage.setItem(\"sessionId\", headers[\"x-session-id\"]);\n            return data;\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n\n    static async post(url: string, body?: any) {\n        try {\n            await axios.post(`${process.env.REACT_APP_API_URL}/api${url}`, body);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n\n    static async put(url: string, body?: any) {\n        try {\n            await axios.put(`${process.env.REACT_APP_API_URL}/api${url}`, body);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n\n    static async delete(url: string) {\n        try {\n            await axios.delete(`${process.env.REACT_APP_API_URL}/api${url}`);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n}"],"mappings":"seAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,UAAa,CAAAC,UAAU,kCAAAA,WAAA,EAAAC,eAAA,MAAAD,UAAA,GAAAE,YAAA,CAAAF,UAAA,QAAAG,GAAA,OAAAC,KAAA,gBAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAEnB,SAAAC,QAAiBC,GAAW,CAAEC,MAAY,MAAAC,gBAAA,CAAAC,IAAA,CAAAC,OAAA,QAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEN,CAAApB,KAAK,CAACqB,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,SAAAH,MAAA,CAAOX,GAAG,EAAI,CAChFC,MAAM,CAANA,MAAM,CACNc,eAAe,CAAE,IACrB,CAAC,CAAC,QAAAb,gBAAA,CAAAK,QAAA,CAAAS,IAAA,CAHGb,IAAI,CAAAD,gBAAA,CAAJC,IAAI,CAAEC,OAAO,CAAAF,gBAAA,CAAPE,OAAO,CAK9Ba,OAAO,CAACC,GAAG,CAACC,QAAQ,CAACC,MAAM,CAAC,CAChB,GAAIhB,OAAO,CAAC,cAAc,CAAC,EAAIA,OAAO,CAAC,cAAc,CAAC,GAAKiB,cAAc,CAACC,OAAO,CAAC,WAAW,CAAC,CAC1FD,cAAc,CAACE,OAAO,CAAC,WAAW,CAAEnB,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,OAAAG,QAAA,CAAAiB,MAAA,UAC1DrB,IAAI,UAAAI,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAkB,EAAA,CAAAlB,QAAA,iBAEPA,QAAA,CAAAkB,EAAA,CAAMC,QAAQ,EAAAnB,QAAA,CAAAE,IAAA,WACdQ,OAAO,CAACU,KAAK,UAAAhB,MAAA,CAAUJ,QAAA,CAAAkB,EAAA,CAAMC,QAAQ,CAACE,MAAM,EAAIrB,QAAA,CAAAkB,EAAA,CAAMC,QAAQ,CAACvB,IAAI,CAAC,CAACI,QAAA,CAAAE,IAAA,wBAAAF,QAAA,CAAAkB,EAAA,0BAAAlB,QAAA,CAAAsB,IAAA,MAAA9B,OAAA,iBAGhF,YAAAW,IAAAoB,EAAA,CAAAC,GAAA,SAAApC,IAAA,CAAAqC,KAAA,MAAAC,SAAA,UAAAvB,GAAA,OAAAjB,GAAA,QAAAC,KAAA,gBAAAwC,KAAA,CAAAtC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAqC,SAAkBnC,GAAW,CAAEoC,IAAU,SAAAvC,mBAAA,GAAAQ,IAAA,UAAAgC,UAAAC,SAAA,iBAAAA,SAAA,CAAA9B,IAAA,CAAA8B,SAAA,CAAA7B,IAAA,SAAA6B,SAAA,CAAA9B,IAAA,GAAA8B,SAAA,CAAA7B,IAAA,SAE3B,CAAApB,KAAK,CAACkD,IAAI,IAAA5B,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,SAAAH,MAAA,CAAOX,GAAG,EAAIoC,IAAI,CAAC,QAAAE,SAAA,CAAA7B,IAAA,iBAAA6B,SAAA,CAAA9B,IAAA,GAAA8B,SAAA,CAAAb,EAAA,CAAAa,SAAA,iBAEhEA,SAAA,CAAAb,EAAA,CAAMC,QAAQ,EAAAY,SAAA,CAAA7B,IAAA,WACdQ,OAAO,CAACU,KAAK,UAAAhB,MAAA,CAAU2B,SAAA,CAAAb,EAAA,CAAMC,QAAQ,CAACE,MAAM,EAAIU,SAAA,CAAAb,EAAA,CAAMC,QAAQ,CAACvB,IAAI,CAAC,CAACmC,SAAA,CAAA7B,IAAA,wBAAA6B,SAAA,CAAAb,EAAA,0BAAAa,SAAA,CAAAT,IAAA,MAAAM,QAAA,gBAGhF,YAAAI,KAAAC,GAAA,CAAAC,GAAA,SAAAP,KAAA,CAAAF,KAAA,MAAAC,SAAA,UAAAM,IAAA,OAAA9C,GAAA,OAAAC,KAAA,gBAAAgD,IAAA,CAAA9C,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAED,SAAA6C,SAAiB3C,GAAW,CAAEoC,IAAU,SAAAvC,mBAAA,GAAAQ,IAAA,UAAAuC,UAAAC,SAAA,iBAAAA,SAAA,CAAArC,IAAA,CAAAqC,SAAA,CAAApC,IAAA,SAAAoC,SAAA,CAAArC,IAAA,GAAAqC,SAAA,CAAApC,IAAA,SAE1B,CAAApB,KAAK,CAACyD,GAAG,IAAAnC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,SAAAH,MAAA,CAAOX,GAAG,EAAIoC,IAAI,CAAC,QAAAS,SAAA,CAAApC,IAAA,iBAAAoC,SAAA,CAAArC,IAAA,GAAAqC,SAAA,CAAApB,EAAA,CAAAoB,SAAA,iBAE/DA,SAAA,CAAApB,EAAA,CAAMC,QAAQ,EAAAmB,SAAA,CAAApC,IAAA,WACdQ,OAAO,CAACU,KAAK,UAAAhB,MAAA,CAAUkC,SAAA,CAAApB,EAAA,CAAMC,QAAQ,CAACE,MAAM,EAAIiB,SAAA,CAAApB,EAAA,CAAMC,QAAQ,CAACvB,IAAI,CAAC,CAAC0C,SAAA,CAAApC,IAAA,wBAAAoC,SAAA,CAAApB,EAAA,0BAAAoB,SAAA,CAAAhB,IAAA,MAAAc,QAAA,gBAGhF,YAAAG,IAAAC,GAAA,CAAAC,GAAA,SAAAN,IAAA,CAAAV,KAAA,MAAAC,SAAA,UAAAa,GAAA,OAAArD,GAAA,UAAAC,KAAA,gBAAAuD,QAAA,CAAArD,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAoD,SAAoBlD,GAAW,SAAAH,mBAAA,GAAAQ,IAAA,UAAA8C,UAAAC,SAAA,iBAAAA,SAAA,CAAA5C,IAAA,CAAA4C,SAAA,CAAA3C,IAAA,SAAA2C,SAAA,CAAA5C,IAAA,GAAA4C,SAAA,CAAA3C,IAAA,SAEjB,CAAApB,KAAK,CAACgE,MAAM,IAAA1C,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,SAAAH,MAAA,CAAOX,GAAG,CAAE,CAAC,QAAAoD,SAAA,CAAA3C,IAAA,iBAAA2C,SAAA,CAAA5C,IAAA,GAAA4C,SAAA,CAAA3B,EAAA,CAAA2B,SAAA,iBAE5DA,SAAA,CAAA3B,EAAA,CAAMC,QAAQ,EAAA0B,SAAA,CAAA3C,IAAA,WACdQ,OAAO,CAACU,KAAK,UAAAhB,MAAA,CAAUyC,SAAA,CAAA3B,EAAA,CAAMC,QAAQ,CAACE,MAAM,EAAIwB,SAAA,CAAA3B,EAAA,CAAMC,QAAQ,CAACvB,IAAI,CAAC,CAACiD,SAAA,CAAA3C,IAAA,wBAAA2C,SAAA,CAAA3B,EAAA,0BAAA2B,SAAA,CAAAvB,IAAA,MAAAqB,QAAA,gBAGhF,YAAAI,QAAAC,GAAA,SAAAN,QAAA,CAAAjB,KAAA,MAAAC,SAAA,UAAAqB,OAAA,eAAAhE,UAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}