{"ast":null,"code":"import _regeneratorRuntime from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{WsrefListComponent}from\"./wsref-list.component\";import{RoleNames}from\"../util/role-names\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function UwsrComponent(){var _useState=useState(RoleNames.GUEST),_useState2=_slicedToArray(_useState,2),role=_useState2[0],setRole=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),admin=_useState6[0],setAdmin=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),guest=_useState8[0],setGuest=_useState8[1];var authorize=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\",{password:password});case 3:setRole(RoleNames.ADMIN);_context.next=13;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);if(!_context.t0.response){_context.next=12;break;}console.error(\"Error \".concat(_context.t0.response.status),_context.t0.response.data);_context.next=13;break;case 12:throw _context.t0;case 13:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function authorize(){return _ref.apply(this,arguments);};}();var handleKeyPress=function handleKeyPress(e){if(e.ctrlKey&&e.altKey){switch(e.code){case\"KeyA\":setAdmin(true);break;case\"KeyG\":setGuest(true);break;}}};useEffect(function(){window.addEventListener(\"keydown\",handleKeyPress);return function(){window.removeEventListener(\"keydown\",handleKeyPress);};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"-- UWSR --\"}),admin?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return authorize();case 2:setAdmin(false);case 3:case\"end\":return _context2.stop();}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),children:\"Set\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){setRole(RoleNames.GUEST);setAdmin(false);},children:\"Reset\"})]})]}):null,guest?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){setRole(RoleNames.GUEST);setGuest(false);},children:\"Reset\"})})}):null,/*#__PURE__*/_jsx(WsrefListComponent,{role:role})]});}","map":{"version":3,"names":["useEffect","useState","WsrefListComponent","RoleNames","axios","jsx","_jsx","jsxs","_jsxs","UwsrComponent","_useState","GUEST","_useState2","_slicedToArray","role","setRole","_useState3","_useState4","password","setPassword","_useState5","_useState6","admin","setAdmin","_useState7","_useState8","guest","setGuest","authorize","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","ADMIN","t0","response","console","error","concat","status","data","stop","apply","arguments","handleKeyPress","e","ctrlKey","altKey","code","window","addEventListener","removeEventListener","children","className","name","value","onChange","target","onClick","_ref2","_callee2","_callee2$","_context2","_x"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/components/uwsr.component.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {WsrefListComponent} from \"./wsref-list.component\";\nimport {RoleNames} from \"../util/role-names\";\nimport axios from \"axios\";\n\nexport function UwsrComponent() {\n    let [role, setRole] = useState(RoleNames.GUEST)\n    let [password, setPassword] = useState(\"\");\n    let [admin, setAdmin] = useState(false);\n    let [guest, setGuest] = useState(false);\n    const authorize = async () => {\n        try {\n            await axios.post(\"\", {password});\n            setRole(RoleNames.ADMIN);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n    const handleKeyPress = (e: KeyboardEvent) => {\n        if (e.ctrlKey && e.altKey) {\n            switch (e.code) {\n                case \"KeyA\":\n                    setAdmin(true);\n                    break;\n                case \"KeyG\":\n                    setGuest(true);\n                    break;\n            }\n        }\n    }\n    useEffect(() => {\n        window.addEventListener(\"keydown\", handleKeyPress);\n        return () => {\n            window.removeEventListener(\"keydown\", handleKeyPress);\n        };\n    }, []);\n    return (\n        <div>\n            <h1>-- UWSR --</h1>\n            {admin ? <div>\n                <div className={\"flex\"}>\n                    <input name={\"password\"} value={password} onChange={(e: any) => setPassword(e.target.value)}/>\n                </div>\n                <div>\n                    <button onClick={async (e: any) => {\n                        await authorize();\n                        setAdmin(false);\n                    }}>Set\n                    </button>\n                    <button onClick={(e: any) => {\n                        setRole(RoleNames.GUEST);\n                        setAdmin(false);\n                    }}>Reset\n                    </button>\n                </div>\n            </div> : null}\n            {guest ? <div>\n                <div>\n                    <button onClick={(e: any) => {\n                        setRole(RoleNames.GUEST);\n                        setGuest(false);\n                    }}>Reset\n                    </button>\n                </div>\n            </div> : null}\n            <WsrefListComponent role={role}/>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}