{"ast":null,"code":"import _regeneratorRuntime from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{WsrefListComponent}from\"./wsref-list.component\";import{RoleNames}from\"../util/role-names\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function UwsrComponent(){var _useState=useState(RoleNames.GUEST),_useState2=_slicedToArray(_useState,2),role=_useState2[0],setRole=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),admin=_useState6[0],setAdmin=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),guest=_useState8[0],setGuest=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),wsrefList=_useState10[0],setWsrefList=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),inserting=_useState12[0],setInserting=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),filtering=_useState14[0],setFiltering=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),filter=_useState16[0],setFilter=_useState16[1];var authorize=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\",{password:password});case 3:setRole(RoleNames.ADMIN);_context.next=13;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);if(!_context.t0.response){_context.next=12;break;}console.error(\"Error \".concat(_context.t0.response.status),_context.t0.response.data);_context.next=13;break;case 12:throw _context.t0;case 13:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function authorize(){return _ref.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put(\"\",{password:password});case 3:console.log('id1');_context2.next=13;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);if(!_context2.t0.response){_context2.next=12;break;}console.error(\"Error \".concat(_context2.t0.response.status),_context2.t0.response.data);_context2.next=13;break;case 12:throw _context2.t0;case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function logout(){return _ref2.apply(this,arguments);};}();var handleKeyPress=function handleKeyPress(e){if(e.ctrlKey&&e.altKey){switch(e.code){case\"KeyA\":setAdmin(true);break;case\"KeyG\":setGuest(true);break;}}};useEffect(function(){window.addEventListener(\"keydown\",handleKeyPress);return function(){window.removeEventListener(\"keydown\",handleKeyPress);};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"-- UWSR --\"}),admin?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return authorize();case 2:setAdmin(false);case 3:case\"end\":return _context3.stop();}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}(),children:\"Set\"}),/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:setRole(RoleNames.GUEST);setAdmin(false);case 2:case\"end\":return _context4.stop();}},_callee4);}));return function(_x2){return _ref4.apply(this,arguments);};}(),children:\"Reset\"})]})]}):null,guest?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(e){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:setRole(RoleNames.GUEST);setGuest(false);_context5.next=4;return logout();case 4:case\"end\":return _context5.stop();}},_callee5);}));return function(_x3){return _ref5.apply(this,arguments);};}(),children:\"Reset\"})})}):null,/*#__PURE__*/_jsx(WsrefListComponent,{role:role})]});}","map":{"version":3,"names":["useEffect","useState","WsrefListComponent","RoleNames","axios","jsx","_jsx","jsxs","_jsxs","UwsrComponent","_useState","GUEST","_useState2","_slicedToArray","role","setRole","_useState3","_useState4","password","setPassword","_useState5","_useState6","admin","setAdmin","_useState7","_useState8","guest","setGuest","_useState9","_useState10","wsrefList","setWsrefList","_useState11","_useState12","inserting","setInserting","_useState13","_useState14","filtering","setFiltering","_useState15","_useState16","filter","setFilter","authorize","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","ADMIN","t0","response","console","error","concat","status","data","stop","apply","arguments","logout","_ref2","_callee2","_callee2$","_context2","put","log","handleKeyPress","e","ctrlKey","altKey","code","window","addEventListener","removeEventListener","children","className","name","value","onChange","target","onClick","_ref3","_callee3","_callee3$","_context3","_x","_ref4","_callee4","_callee4$","_context4","_x2","_ref5","_callee5","_callee5$","_context5","_x3"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/components/uwsr.component.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {WsrefListComponent} from \"./wsref-list.component\";\nimport {RoleNames} from \"../util/role-names\";\nimport axios from \"axios\";\nimport { ApiManager } from \"../util/api.manager\";\n\nexport function UwsrComponent() {\n    let [role, setRole] = useState(RoleNames.GUEST)\n    let [password, setPassword] = useState(\"\");\n    let [admin, setAdmin] = useState(false);\n    let [guest, setGuest] = useState(false);\n      let [wsrefList, setWsrefList] = useState<any[]>();\n      let [inserting, setInserting] = useState(false);\n      let [filtering, setFiltering] = useState(false);\n      let [filter, setFilter] = useState(\"\");\n    const authorize = async () => {\n        try {\n            await axios.post(\"\", {password});\n            setRole(RoleNames.ADMIN);\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n    const logout = async () => {\n        try {\n       await axios.put(\"\", { password });\n   \n             console.log('id1');\n        } catch (error: any) {\n            if (error.response)\n                console.error(`Error ${error.response.status}`, error.response.data);\n            else throw error;\n        }\n    }\n      \n    const handleKeyPress = (e: KeyboardEvent) => {\n        if (e.ctrlKey && e.altKey) {\n            switch (e.code) {\n                case \"KeyA\":\n                    setAdmin(true);\n                    break;\n                case \"KeyG\":\n                    setGuest(true);\n                    break;\n            }\n        }\n    }\n    useEffect(() => {\n        window.addEventListener(\"keydown\", handleKeyPress);\n        return () => {\n            window.removeEventListener(\"keydown\", handleKeyPress);\n        };\n    }, []);\n    return (\n        <div>\n            <h1>-- UWSR --</h1>\n            {admin ? <div>\n                <div className={\"flex\"}>\n                    <input name={\"password\"} value={password} onChange={(e: any) => setPassword(e.target.value)}/>\n                </div>\n                <div>\n                    <button onClick={async (e: any) => {\n                        await authorize();\n                        setAdmin(false);\n                    }}>Set\n                    </button>\n                    <button onClick={async (e: any) => {\n                        setRole(RoleNames.GUEST);\n                        setAdmin(false);\n                       \n                    }}>Reset\n                    </button>\n                </div>\n            </div> : null}\n            {guest ? <div>\n                <div>\n                    <button onClick={async(e: any) =>  {\n                        setRole(RoleNames.GUEST);\n                        setGuest(false);\n                         await logout();\n                    }}>Reset\n                    </button>\n                </div>\n            </div> : null}\n            <WsrefListComponent role={role}/>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}