{"ast":null,"code":"import _regeneratorRuntime from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{WsrefFormComponent}from\"./wsref-form.component\";import{WsrefFilterComponent}from\"./wsref-filter.component\";import{WsrefInfoComponent}from\"./wsref-info.component\";import{ApiManager}from\"../util/api.manager\";import{RoleNames}from\"../util/role-names\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function WsrefListComponent(_ref){var role=_ref.role;var _useState=useState(),_useState2=_slicedToArray(_useState,2),wsrefList=_useState2[0],setWsrefList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),inserting=_useState4[0],setInserting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),filtering=_useState6[0],setFiltering=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var loadWsrefs=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var wsrefsData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return ApiManager.get(\"/wsref\",{filter:(filter===null||filter===void 0?void 0:filter.length)>0?filter:undefined});case 2:wsrefsData=_context.sent;if(wsrefsData)setWsrefList(wsrefsData);case 4:case\"end\":return _context.stop();}},_callee);}));return function loadWsrefs(){return _ref2.apply(this,arguments);};}();var insertWsref=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(wsrefDto){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return ApiManager.post(\"/wsref\",wsrefDto);case 2:loadWsrefs();case 3:case\"end\":return _context2.stop();}},_callee2);}));return function insertWsref(_x){return _ref3.apply(this,arguments);};}();var updateWsref=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,wsrefDto){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return ApiManager.put(\"/wsref/\".concat(id),wsrefDto);case 2:loadWsrefs();case 3:case\"end\":return _context3.stop();}},_callee3);}));return function updateWsref(_x2,_x3){return _ref4.apply(this,arguments);};}();var deleteWsref=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return ApiManager.delete(\"/wsref/\".concat(id));case 2:loadWsrefs();case 3:case\"end\":return _context4.stop();}},_callee4);}));return function deleteWsref(_x4){return _ref5.apply(this,arguments);};}();var incrementWsref=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return ApiManager.put(\"/wsref/\".concat(id,\"/plus\"));case 2:loadWsrefs();case 3:case\"end\":return _context5.stop();}},_callee5);}));return function incrementWsref(_x5){return _ref6.apply(this,arguments);};}();var decrementWsref=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(id){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return ApiManager.put(\"/wsref/\".concat(id,\"/minus\"));case 2:loadWsrefs();case 3:case\"end\":return _context6.stop();}},_callee6);}));return function decrementWsref(_x6){return _ref7.apply(this,arguments);};}();useEffect(function(){loadWsrefs();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[role===RoleNames.ADMIN?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return setInserting(true);},children:\"insert\"}):null,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return setFiltering(true);},children:\"filter\"})]}),inserting?/*#__PURE__*/_jsx(WsrefFormComponent,{insertWsref:/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(wsrefDto){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.next=2;return insertWsref(wsrefDto);case 2:setInserting(false);case 3:case\"end\":return _context7.stop();}},_callee7);}));return function(_x7){return _ref8.apply(this,arguments);};}(),onClose:function onClose(){return setInserting(false);}}):null,filtering?/*#__PURE__*/_jsx(WsrefFilterComponent,{filter:filter,setFilter:setFilter,submit:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.next=2;return loadWsrefs();case 2:setFiltering(false);case 3:case\"end\":return _context8.stop();}},_callee8);})),onClose:function onClose(){return setFiltering(false);}}):null,wsrefList===null||wsrefList===void 0?void 0:wsrefList.map(function(wsref){return/*#__PURE__*/_jsx(WsrefInfoComponent,{role:role,wsref:wsref,updateWsref:updateWsref,deleteWsref:deleteWsref,incrementWsref:incrementWsref,decrementWsref:decrementWsref},wsref.id);})]});}","map":{"version":3,"names":["useEffect","useState","WsrefFormComponent","WsrefFilterComponent","WsrefInfoComponent","ApiManager","RoleNames","jsx","_jsx","jsxs","_jsxs","WsrefListComponent","_ref","role","_useState","_useState2","_slicedToArray","wsrefList","setWsrefList","_useState3","_useState4","inserting","setInserting","_useState5","_useState6","filtering","setFiltering","_useState7","_useState8","filter","setFilter","loadWsrefs","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wsrefsData","wrap","_callee$","_context","prev","next","get","length","undefined","sent","stop","apply","arguments","insertWsref","_ref3","_callee2","wsrefDto","_callee2$","_context2","post","_x","updateWsref","_ref4","_callee3","id","_callee3$","_context3","put","concat","_x2","_x3","deleteWsref","_ref5","_callee4","_callee4$","_context4","delete","_x4","incrementWsref","_ref6","_callee5","_callee5$","_context5","_x5","decrementWsref","_ref7","_callee6","_callee6$","_context6","_x6","children","ADMIN","onClick","e","_ref8","_callee7","_callee7$","_context7","_x7","onClose","submit","_callee8","_callee8$","_context8","map","wsref"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/components/wsref-list.component.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {WsrefFormComponent} from \"./wsref-form.component\";\nimport {WsrefFilterComponent} from \"./wsref-filter.component\";\nimport {WsrefInfoComponent} from \"./wsref-info.component\";\nimport {ApiManager} from \"../util/api.manager\";\nimport {RoleNames} from \"../util/role-names\";\n\nexport function WsrefListComponent({role}: {\n    role: RoleNames\n}) {\n    let [wsrefList, setWsrefList] = useState<any[]>();\n    let [inserting, setInserting] = useState(false);\n    let [filtering, setFiltering] = useState(false);\n    let [filter, setFilter] = useState(\"\");\n    const loadWsrefs = async () => {\n        let wsrefsData = await ApiManager.get(`/wsref`, {\n            filter: filter?.length > 0 ? filter : undefined\n        });\n        if (wsrefsData)\n            setWsrefList(wsrefsData);\n    }\n    const insertWsref = async (wsrefDto: any) => {\n        await ApiManager.post(`/wsref`, wsrefDto);\n        loadWsrefs();\n    }\n    const updateWsref = async (id: number, wsrefDto: any) => {\n        await ApiManager.put(`/wsref/${id}`, wsrefDto);\n        loadWsrefs();\n    }\n    const deleteWsref = async (id: number) => {\n        await ApiManager.delete(`/wsref/${id}`);\n        loadWsrefs();\n    }\n    const incrementWsref = async (id: number) => {\n        await ApiManager.put(`/wsref/${id}/plus`);\n        loadWsrefs();\n    }\n    const decrementWsref = async (id: number) => {\n        await ApiManager.put(`/wsref/${id}/minus`);\n        loadWsrefs();\n    }\n    useEffect(() => {\n        loadWsrefs();\n    }, []);\n    return (\n        <div>\n            <div>\n                {role === RoleNames.ADMIN ? <button onClick={(e: any) => setInserting(true)}>\n                    insert\n                </button> : null}\n                <button onClick={(e: any) => setFiltering(true)}>filter</button>\n            </div>\n            {inserting ? <WsrefFormComponent insertWsref={async (wsrefDto: any) => {\n                await insertWsref(wsrefDto);\n                setInserting(false);\n            }} onClose={() => setInserting(false)}/> : null}\n            {filtering ? <WsrefFilterComponent filter={filter} setFilter={setFilter} submit={async () => {\n                await loadWsrefs();\n                setFiltering(false);\n            }} onClose={() => setFiltering(false)}/> : null}\n            {wsrefList?.map((wsref: any) => <WsrefInfoComponent key={wsref.id}\n                                                                role={role}\n                                                                wsref={wsref}\n                                                                updateWsref={updateWsref}\n                                                                deleteWsref={deleteWsref}\n                                                                incrementWsref={incrementWsref}\n                                                                decrementWsref={decrementWsref}/>)}\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}