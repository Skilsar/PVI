{"ast":null,"code":"var _jsxFileName = \"D:\\\\BSTU\\\\practica\\\\PWI\\\\Lab16\\\\react\\\\src\\\\components\\\\wsref-comment-list.component.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { WsrefCommentFormComponent } from \"./wsref-comment-form.component\";\nimport { WsrefCommentInfoComponent } from \"./wsref-comment-info.component\";\nimport { ApiManager } from \"../util/api.manager\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function WsrefCommentListComponent({\n  role,\n  wsref\n}) {\n  _s();\n  let [wsrefCommentList, setWsrefCommentList] = useState();\n  let [inserting, setInserting] = useState(false);\n  const loadWsrefComments = async () => {\n    let wsrefCommentsData = await ApiManager.get(`/wsrefcomment`, {\n      wsref: wsref.id\n    });\n    if (wsrefCommentsData) setWsrefCommentList(wsrefCommentsData);\n  };\n  const insertWsrefComment = async wsrefCommentDto => {\n    await ApiManager.post(`/wsrefcomment`, wsrefCommentDto);\n    loadWsrefComments();\n  };\n  const updateWsrefComment = async (id, wsrefCommentDto) => {\n    await ApiManager.put(`/wsrefcomment/${id}`, wsrefCommentDto);\n    loadWsrefComments();\n  };\n  const deleteWsrefComment = async id => {\n    await ApiManager.delete(`/wsrefcomment/${id}`);\n    loadWsrefComments();\n  };\n  useEffect(() => {\n    loadWsrefComments();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"fieldset\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"-- UWSR Comments/\", wsref.id, \" --\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => setInserting(true),\n        children: \"insert\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), inserting ? /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      children: /*#__PURE__*/_jsxDEV(WsrefCommentFormComponent, {\n        wsrefId: wsref.id,\n        insertWsrefComment: async wsrefCommentDto => {\n          await insertWsrefComment(wsrefCommentDto);\n          setInserting(false);\n        },\n        onClose: () => setInserting(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 26\n    }, this) : null, wsrefCommentList === null || wsrefCommentList === void 0 ? void 0 : wsrefCommentList.map(wsrefComment => /*#__PURE__*/_jsxDEV(WsrefCommentInfoComponent, {\n      role: role,\n      wsrefComment: wsrefComment,\n      updateWsrefComment: updateWsrefComment,\n      deleteWsrefComment: deleteWsrefComment\n    }, wsrefComment.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 59\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n_s(WsrefCommentListComponent, \"3FqUPYJIRlFJ22+u8vd5s45/iPs=\");\n_c = WsrefCommentListComponent;\nvar _c;\n$RefreshReg$(_c, \"WsrefCommentListComponent\");","map":{"version":3,"names":["useEffect","useState","WsrefCommentFormComponent","WsrefCommentInfoComponent","ApiManager","jsxDEV","_jsxDEV","WsrefCommentListComponent","role","wsref","_s","wsrefCommentList","setWsrefCommentList","inserting","setInserting","loadWsrefComments","wsrefCommentsData","get","id","insertWsrefComment","wsrefCommentDto","post","updateWsrefComment","put","deleteWsrefComment","delete","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","e","wsrefId","onClose","map","wsrefComment","_c","$RefreshReg$"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/components/wsref-comment-list.component.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {WsrefCommentFormComponent} from \"./wsref-comment-form.component\";\nimport {WsrefCommentInfoComponent} from \"./wsref-comment-info.component\";\nimport {ApiManager} from \"../util/api.manager\";\nimport {RoleNames} from \"../util/role-names\";\n\nexport function WsrefCommentListComponent({role, wsref}: {\n    role: RoleNames,\n    wsref: any\n}) {\n    let [wsrefCommentList, setWsrefCommentList] = useState<any[]>();\n    let [inserting, setInserting] = useState(false);\n    const loadWsrefComments = async () => {\n        let wsrefCommentsData = await ApiManager.get(`/wsrefcomment`, {\n            wsref: wsref.id\n        });\n        if (wsrefCommentsData)\n            setWsrefCommentList(wsrefCommentsData);\n    }\n    const insertWsrefComment = async (wsrefCommentDto: any) => {\n        await ApiManager.post(`/wsrefcomment`, wsrefCommentDto);\n        loadWsrefComments();\n    }\n    const updateWsrefComment = async (id: number, wsrefCommentDto: any) => {\n        await ApiManager.put(`/wsrefcomment/${id}`, wsrefCommentDto);\n        loadWsrefComments();\n    }\n    const deleteWsrefComment = async (id: number) => {\n        await ApiManager.delete(`/wsrefcomment/${id}`);\n        loadWsrefComments();\n    }\n    useEffect(() => {\n        loadWsrefComments();\n    }, []);\n    return (\n        <fieldset>\n            <h2>-- UWSR Comments/{wsref.id} --</h2>\n            <div>\n                <button onClick={(e: any) => setInserting(true)}>insert</button>\n            </div>\n            {inserting ? <fieldset>\n                <WsrefCommentFormComponent wsrefId={wsref.id}\n                                           insertWsrefComment={async (wsrefCommentDto: any) => {\n                                               await insertWsrefComment(wsrefCommentDto);\n                                               setInserting(false);\n                                           }} onClose={() => setInserting(false)}/>\n            </fieldset> : null}\n            {wsrefCommentList?.map((wsrefComment: any) => <WsrefCommentInfoComponent key={wsrefComment.id}\n                                                                                     role={role}\n                                                                                     wsrefComment={wsrefComment}\n                                                                                     updateWsrefComment={updateWsrefComment}\n                                                                                     deleteWsrefComment={deleteWsrefComment}/>)}\n        </fieldset>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}