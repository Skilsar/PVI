{"ast":null,"code":"import _regeneratorRuntime from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{WsrefCommentFormComponent}from\"./wsref-comment-form.component\";import{WsrefCommentInfoComponent}from\"./wsref-comment-info.component\";import{ApiManager}from\"../util/api.manager\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export function WsrefCommentListComponent(_ref){var role=_ref.role,wsref=_ref.wsref;var _useState=useState(),_useState2=_slicedToArray(_useState,2),wsrefCommentList=_useState2[0],setWsrefCommentList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),inserting=_useState4[0],setInserting=_useState4[1];var loadWsrefComments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var wsrefCommentsData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return ApiManager.get(\"/wsrefcomment\",{wsref:wsref.id});case 2:wsrefCommentsData=_context.sent;if(wsrefCommentsData)setWsrefCommentList(wsrefCommentsData);case 4:case\"end\":return _context.stop();}},_callee);}));return function loadWsrefComments(){return _ref2.apply(this,arguments);};}();var insertWsrefComment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(wsrefCommentDto){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return ApiManager.post(\"/wsrefcomment\",wsrefCommentDto);case 2:loadWsrefComments();case 3:case\"end\":return _context2.stop();}},_callee2);}));return function insertWsrefComment(_x){return _ref3.apply(this,arguments);};}();var updateWsrefComment=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,wsrefCommentDto){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return ApiManager.put(\"/wsrefcomment/\".concat(id),wsrefCommentDto);case 2:loadWsrefComments();case 3:case\"end\":return _context3.stop();}},_callee3);}));return function updateWsrefComment(_x2,_x3){return _ref4.apply(this,arguments);};}();var deleteWsrefComment=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return ApiManager.delete(\"/wsrefcomment/\".concat(id));case 2:loadWsrefComments();case 3:case\"end\":return _context4.stop();}},_callee4);}));return function deleteWsrefComment(_x4){return _ref5.apply(this,arguments);};}();useEffect(function(){loadWsrefComments();},[]);return/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"-- UWSR Comments/\",wsref.id,\" --\"]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return setInserting(true);},children:\"insert\"})}),inserting?/*#__PURE__*/_jsx(\"fieldset\",{children:/*#__PURE__*/_jsx(WsrefCommentFormComponent,{wsrefId:wsref.id,insertWsrefComment:/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(wsrefCommentDto){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return insertWsrefComment(wsrefCommentDto);case 2:setInserting(false);case 3:case\"end\":return _context5.stop();}},_callee5);}));return function(_x5){return _ref6.apply(this,arguments);};}(),onClose:function onClose(){return setInserting(false);}})}):null,wsrefCommentList===null||wsrefCommentList===void 0?void 0:wsrefCommentList.map(function(wsrefComment){return/*#__PURE__*/_jsx(WsrefCommentInfoComponent,{role:role,wsrefComment:wsrefComment,updateWsrefComment:updateWsrefComment,deleteWsrefComment:deleteWsrefComment},wsrefComment.id);})]});}","map":{"version":3,"names":["useEffect","useState","WsrefCommentFormComponent","WsrefCommentInfoComponent","ApiManager","jsxs","_jsxs","jsx","_jsx","WsrefCommentListComponent","_ref","role","wsref","_useState","_useState2","_slicedToArray","wsrefCommentList","setWsrefCommentList","_useState3","_useState4","inserting","setInserting","loadWsrefComments","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wsrefCommentsData","wrap","_callee$","_context","prev","next","get","id","sent","stop","apply","arguments","insertWsrefComment","_ref3","_callee2","wsrefCommentDto","_callee2$","_context2","post","_x","updateWsrefComment","_ref4","_callee3","_callee3$","_context3","put","concat","_x2","_x3","deleteWsrefComment","_ref5","_callee4","_callee4$","_context4","delete","_x4","children","onClick","e","wsrefId","_ref6","_callee5","_callee5$","_context5","_x5","onClose","map","wsrefComment"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/components/wsref-comment-list.component.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {WsrefCommentFormComponent} from \"./wsref-comment-form.component\";\nimport {WsrefCommentInfoComponent} from \"./wsref-comment-info.component\";\nimport {ApiManager} from \"../util/api.manager\";\nimport {RoleNames} from \"../util/role-names\";\n\nexport function WsrefCommentListComponent({role, wsref}: {\n    role: RoleNames,\n    wsref: any\n}) {\n    let [wsrefCommentList, setWsrefCommentList] = useState<any[]>();\n    let [inserting, setInserting] = useState(false);\n    const loadWsrefComments = async () => {\n        let wsrefCommentsData = await ApiManager.get(`/wsrefcomment`, {\n            wsref: wsref.id\n        });\n        if (wsrefCommentsData)\n            setWsrefCommentList(wsrefCommentsData);\n    }\n    const insertWsrefComment = async (wsrefCommentDto: any) => {\n        await ApiManager.post(`/wsrefcomment`, wsrefCommentDto);\n        loadWsrefComments();\n    }\n    const updateWsrefComment = async (id: number, wsrefCommentDto: any) => {\n        await ApiManager.put(`/wsrefcomment/${id}`, wsrefCommentDto);\n        loadWsrefComments();\n    }\n    const deleteWsrefComment = async (id: number) => {\n        await ApiManager.delete(`/wsrefcomment/${id}`);\n        loadWsrefComments();\n    }\n    useEffect(() => {\n        loadWsrefComments();\n    }, []);\n    return (\n        <fieldset>\n            <h2>-- UWSR Comments/{wsref.id} --</h2>\n            <div>\n                <button onClick={(e: any) => setInserting(true)}>insert</button>\n            </div>\n            {inserting ? <fieldset>\n                <WsrefCommentFormComponent wsrefId={wsref.id}\n                                           insertWsrefComment={async (wsrefCommentDto: any) => {\n                                               await insertWsrefComment(wsrefCommentDto);\n                                               setInserting(false);\n                                           }} onClose={() => setInserting(false)}/>\n            </fieldset> : null}\n            {wsrefCommentList?.map((wsrefComment: any) => <WsrefCommentInfoComponent key={wsrefComment.id}\n                                                                                     role={role}\n                                                                                     wsrefComment={wsrefComment}\n                                                                                     updateWsrefComment={updateWsrefComment}\n                                                                                     deleteWsrefComment={deleteWsrefComment}/>)}\n        </fieldset>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}