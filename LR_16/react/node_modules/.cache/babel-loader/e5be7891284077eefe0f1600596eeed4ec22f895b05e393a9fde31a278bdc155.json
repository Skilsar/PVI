{"ast":null,"code":"import _regeneratorRuntime from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/BSTU/practica/PWI/Lab16/react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";import Cookies from'universal-cookie';export var ApiManager=/*#__PURE__*/function(){function ApiManager(){_classCallCheck(this,ApiManager);}_createClass(ApiManager,null,[{key:\"get\",value:// Получение значения куки\nfunction(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,params){var jsessionid,_yield$axios$get,data,headers;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;jsessionid=this.cookies;_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),{params:params,withCredentials:true});case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;headers=_yield$axios$get.headers;console.log(jsessionid);if(headers[\"x-session-id\"]&&headers[\"x-session-id\"]!==sessionStorage.getItem(\"sessionId\"))sessionStorage.setItem(\"sessionId\",headers[\"x-session-id\"]);return _context.abrupt(\"return\",data);case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);if(!_context.t0.response){_context.next=18;break;}console.error(\"Error \".concat(_context.t0.response.status),_context.t0.response.data);_context.next=19;break;case 18:throw _context.t0;case 19:case\"end\":return _context.stop();}},_callee,this,[[0,12]]);}));function get(_x,_x2){return _get.apply(this,arguments);}return get;}()},{key:\"post\",value:function(){var _post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url,body){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),body);case 3:_context2.next=12;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);if(!_context2.t0.response){_context2.next=11;break;}console.error(\"Error \".concat(_context2.t0.response.status),_context2.t0.response.data);_context2.next=12;break;case 11:throw _context2.t0;case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}));function post(_x3,_x4){return _post.apply(this,arguments);}return post;}()},{key:\"put\",value:function(){var _put=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(url,body){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url),body);case 3:_context3.next=12;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);if(!_context3.t0.response){_context3.next=11;break;}console.error(\"Error \".concat(_context3.t0.response.status),_context3.t0.response.data);_context3.next=12;break;case 11:throw _context3.t0;case 12:case\"end\":return _context3.stop();}},_callee3,null,[[0,5]]);}));function put(_x5,_x6){return _put.apply(this,arguments);}return put;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(url){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api\").concat(url));case 3:_context4.next=12;break;case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);if(!_context4.t0.response){_context4.next=11;break;}console.error(\"Error \".concat(_context4.t0.response.status),_context4.t0.response.data);_context4.next=12;break;case 11:throw _context4.t0;case 12:case\"end\":return _context4.stop();}},_callee4,null,[[0,5]]);}));function _delete(_x7){return _delete2.apply(this,arguments);}return _delete;}()}]);return ApiManager;}();ApiManager.cookies=new Cookies();","map":{"version":3,"names":["axios","Cookies","ApiManager","_classCallCheck","_createClass","key","value","_get","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","params","jsessionid","_yield$axios$get","data","headers","wrap","_callee$","_context","prev","next","cookies","get","concat","process","env","REACT_APP_API_URL","withCredentials","sent","console","log","sessionStorage","getItem","setItem","abrupt","t0","response","error","status","stop","_x","_x2","apply","arguments","_post","_callee2","body","_callee2$","_context2","post","_x3","_x4","_put","_callee3","_callee3$","_context3","put","_x5","_x6","_delete2","_callee4","_callee4$","_context4","delete","_delete","_x7"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/util/api.manager.ts"],"sourcesContent":["import axios from \"axios\";\nimport  Cookies  from 'universal-cookie';\nexport class ApiManager {\n  static cookies = new Cookies();\n\n\n  // Получение значения куки\n\n  static async get(url: string, params?: any) {\n    try {\n     const jsessionid = this.cookies;\n      let { data, headers } = await axios.get(\n        `${process.env.REACT_APP_API_URL}/api${url}`,\n        {\n          params,\n          withCredentials: true,\n        }\n      );\nconsole.log(jsessionid);\n      if (\n        headers[\"x-session-id\"] &&\n        headers[\"x-session-id\"] !== sessionStorage.getItem(\"sessionId\")\n      )\n        sessionStorage.setItem(\"sessionId\", headers[\"x-session-id\"]);\n      return data;\n    } catch (error: any) {\n      if (error.response)\n        console.error(`Error ${error.response.status}`, error.response.data);\n      else throw error;\n    }\n  }\n\n  static async post(url: string, body?: any) {\n    try {\n      await axios.post(`${process.env.REACT_APP_API_URL}/api${url}`, body);\n    } catch (error: any) {\n      if (error.response)\n        console.error(`Error ${error.response.status}`, error.response.data);\n      else throw error;\n    }\n  }\n\n  static async put(url: string, body?: any) {\n    try {\n      await axios.put(`${process.env.REACT_APP_API_URL}/api${url}`, body);\n    } catch (error: any) {\n      if (error.response)\n        console.error(`Error ${error.response.status}`, error.response.data);\n      else throw error;\n    }\n  }\n\n  static async delete(url: string) {\n    try {\n      await axios.delete(`${process.env.REACT_APP_API_URL}/api${url}`);\n    } catch (error: any) {\n      if (error.response)\n        console.error(`Error ${error.response.status}`, error.response.data);\n      else throw error;\n    }\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}