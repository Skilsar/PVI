{"ast":null,"code":"var _jsxFileName = \"D:\\\\BSTU\\\\practica\\\\PWI\\\\Lab16\\\\react\\\\src\\\\components\\\\wsref-list.component.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { WsrefFormComponent } from \"./wsref-form.component\";\nimport { WsrefFilterComponent } from \"./wsref-filter.component\";\nimport { WsrefInfoComponent } from \"./wsref-info.component\";\nimport { ApiManager } from \"../util/api.manager\";\nimport { RoleNames } from \"../util/role-names\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function WsrefListComponent({\n  role\n}) {\n  _s();\n  let [wsrefList, setWsrefList] = useState();\n  let [inserting, setInserting] = useState(false);\n  let [filtering, setFiltering] = useState(false);\n  let [filter, setFilter] = useState(\"\");\n  const loadWsrefs = async () => {\n    let wsrefsData = await ApiManager.get(`/wsref`, {\n      filter: (filter === null || filter === void 0 ? void 0 : filter.length) > 0 ? filter : undefined\n    });\n    if (wsrefsData) setWsrefList(wsrefsData);\n  };\n  const insertWsref = async wsrefDto => {\n    await ApiManager.post(`/wsref`, wsrefDto);\n    loadWsrefs();\n  };\n  const updateWsref = async (id, wsrefDto) => {\n    await ApiManager.put(`/wsref/${id}`, wsrefDto);\n    loadWsrefs();\n  };\n  const deleteWsref = async id => {\n    await ApiManager.delete(`/wsref/${id}`);\n    loadWsrefs();\n  };\n  const incrementWsref = async id => {\n    await ApiManager.put(`/wsref/${id}/plus`);\n    loadWsrefs();\n  };\n  const decrementWsref = async id => {\n    await ApiManager.put(`/wsref/${id}/minus`);\n    loadWsrefs();\n  };\n  useEffect(() => {\n    loadWsrefs();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [role === RoleNames.ADMIN ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => setInserting(true),\n        children: \"insert\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 45\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => setFiltering(true),\n        children: \"filter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), inserting ? /*#__PURE__*/_jsxDEV(WsrefFormComponent, {\n      insertWsref: async wsrefDto => {\n        await insertWsref(wsrefDto);\n        setInserting(false);\n      },\n      onClose: () => setInserting(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 26\n    }, this) : null, filtering ? /*#__PURE__*/_jsxDEV(WsrefFilterComponent, {\n      filter: filter,\n      setFilter: setFilter,\n      submit: async () => {\n        await loadWsrefs();\n        setFiltering(false);\n      },\n      onClose: () => setFiltering(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 26\n    }, this) : null, wsrefList === null || wsrefList === void 0 ? void 0 : wsrefList.map(wsref => /*#__PURE__*/_jsxDEV(WsrefInfoComponent, {\n      role: role,\n      wsref: wsref,\n      updateWsref: updateWsref,\n      deleteWsref: deleteWsref,\n      incrementWsref: incrementWsref,\n      decrementWsref: decrementWsref\n    }, wsref.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 45\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n_s(WsrefListComponent, \"77GDJaZTAFkUxUPtVdjbtROoioM=\");\n_c = WsrefListComponent;\nvar _c;\n$RefreshReg$(_c, \"WsrefListComponent\");","map":{"version":3,"names":["useEffect","useState","WsrefFormComponent","WsrefFilterComponent","WsrefInfoComponent","ApiManager","RoleNames","jsxDEV","_jsxDEV","WsrefListComponent","role","_s","wsrefList","setWsrefList","inserting","setInserting","filtering","setFiltering","filter","setFilter","loadWsrefs","wsrefsData","get","length","undefined","insertWsref","wsrefDto","post","updateWsref","id","put","deleteWsref","delete","incrementWsref","decrementWsref","children","ADMIN","onClick","e","fileName","_jsxFileName","lineNumber","columnNumber","onClose","submit","map","wsref","_c","$RefreshReg$"],"sources":["D:/BSTU/practica/PWI/Lab16/react/src/components/wsref-list.component.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {WsrefFormComponent} from \"./wsref-form.component\";\nimport {WsrefFilterComponent} from \"./wsref-filter.component\";\nimport {WsrefInfoComponent} from \"./wsref-info.component\";\nimport {ApiManager} from \"../util/api.manager\";\nimport {RoleNames} from \"../util/role-names\";\n\nexport function WsrefListComponent({role}: {\n    role: RoleNames\n}) {\n    let [wsrefList, setWsrefList] = useState<any[]>();\n    let [inserting, setInserting] = useState(false);\n    let [filtering, setFiltering] = useState(false);\n    let [filter, setFilter] = useState(\"\");\n    const loadWsrefs = async () => {\n        let wsrefsData = await ApiManager.get(`/wsref`, {\n            filter: filter?.length > 0 ? filter : undefined\n        });\n        if (wsrefsData)\n            setWsrefList(wsrefsData);\n    }\n    const insertWsref = async (wsrefDto: any) => {\n        await ApiManager.post(`/wsref`, wsrefDto);\n        loadWsrefs();\n    }\n    const updateWsref = async (id: number, wsrefDto: any) => {\n        await ApiManager.put(`/wsref/${id}`, wsrefDto);\n        loadWsrefs();\n    }\n    const deleteWsref = async (id: number) => {\n        await ApiManager.delete(`/wsref/${id}`);\n        loadWsrefs();\n    }\n    const incrementWsref = async (id: number) => {\n        await ApiManager.put(`/wsref/${id}/plus`);\n        loadWsrefs();\n    }\n    const decrementWsref = async (id: number) => {\n        await ApiManager.put(`/wsref/${id}/minus`);\n        loadWsrefs();\n    }\n    useEffect(() => {\n        loadWsrefs();\n    }, []);\n    return (\n        <div>\n            <div>\n                {role === RoleNames.ADMIN ? <button onClick={(e: any) => setInserting(true)}>\n                    insert\n                </button> : null}\n                <button onClick={(e: any) => setFiltering(true)}>filter</button>\n            </div>\n            {inserting ? <WsrefFormComponent insertWsref={async (wsrefDto: any) => {\n                await insertWsref(wsrefDto);\n                setInserting(false);\n            }} onClose={() => setInserting(false)}/> : null}\n            {filtering ? <WsrefFilterComponent filter={filter} setFilter={setFilter} submit={async () => {\n                await loadWsrefs();\n                setFiltering(false);\n            }} onClose={() => setFiltering(false)}/> : null}\n            {wsrefList?.map((wsref: any) => <WsrefInfoComponent key={wsref.id}\n                                                                role={role}\n                                                                wsref={wsref}\n                                                                updateWsref={updateWsref}\n                                                                deleteWsref={deleteWsref}\n                                                                incrementWsref={incrementWsref}\n                                                                decrementWsref={decrementWsref}/>)}\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}